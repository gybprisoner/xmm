{"remainingRequest":"D:\\project_movie_1902-master\\movie\\node_modules\\babel-loader\\lib\\index.js!D:\\project_movie_1902-master\\movie\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project_movie_1902-master\\movie\\src\\components\\Mvshopping.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\project_movie_1902-master\\movie\\src\\components\\Mvshopping.vue","mtime":1561117657000},{"path":"D:\\project_movie_1902-master\\movie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1561445008106},{"path":"D:\\project_movie_1902-master\\movie\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"D:\\project_movie_1902-master\\movie\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport erweima from './Mverweima';\nexport default {\n  data: function data() {\n    return {\n      danxuan: 0,\n      //保存下标\n      qian: 0,\n      //保存总计的总价\n      shu: 0,\n      //选中的数量\n      shun: 0,\n      //购物车总数量\n      dibu: true,\n      //控制底部导航的切换\n      qiehuan: \"编辑\",\n      delsum: 0,\n      //删除的数量\n      tf: false,\n      shujuku: [],\n      show: false,\n      //控制二维码\n      show2: true,\n      //控制页面\n      quanshu: 0,\n      //购物车为空时，不能使用全选按钮\n      value: [],\n      options: [{\n        label: '全选',\n        value: 'A'\n      }]\n    };\n  },\n  components: {\n    erweima: erweima\n  },\n  methods: {\n    min: function min(e) {\n      //减法函数\n      for (var i = 0; i < this.shujuku.length; i++) {\n        if (e == i) {\n          if (this.shujuku[i].count > 1) {\n            this.shujuku[i].count--;\n          } else {\n            return;\n          }\n\n          ;\n        }\n\n        ;\n      }\n\n      ;\n      this.jiajian(); //调用计算总计函数\n    },\n    add: function add(s) {\n      //加法函数\n      for (var i = 0; i < this.shujuku.length; i++) {\n        if (s == i) {\n          if (this.shujuku[i].count < 100) {\n            this.shujuku[i].count++;\n          } else {\n            return;\n          }\n\n          ;\n        }\n\n        ;\n      }\n\n      ;\n      this.jiajian(); //调用计算总计函数\n    },\n    xuan: function xuan(e) {\n      //单个按钮\n      var add = 0; //选中价格\n\n      var min = 0; //取消价格\n\n      var zshu = 0; //选中数量\n\n      var jshu = 0; //取消数量\n\n      var zongshu = 0; //删除选中的数量\n\n      for (var i = 0; i < this.shujuku.length; i++) {\n        //当前选中的\n        if (e.target.checked == true) {\n          if (this.danxuan == i) {\n            add = this.shujuku[i].count * this.shujuku[i].price; //选中的价格\n\n            zshu = this.shujuku[i].count; //选中的数量\n          }\n\n          ;\n        } else {\n          if (this.danxuan == i) {\n            //当前去取消的\n            min = this.shujuku[i].count * this.shujuku[i].price; //取消的价格\n\n            jshu = this.shujuku[i].count; //取消的数量\n          }\n\n          ;\n        }\n\n        ;\n\n        if (this.danxuan == i) {\n          //给cd监听状态\n          this.shujuku[i].cd = e.target.checked;\n        }\n\n        ;\n\n        if (this.shujuku[i].cd == true) {\n          zongshu++;\n        }\n      }\n\n      ;\n      this.delsum = zongshu; //删除选中的数量\n\n      this.qian += add; //将总计赋值给页面上\n\n      this.qian -= min; //将总计赋值给页面上\n\n      this.shu += zshu; //将选中的数量赋值给页面上\n\n      this.shu -= jshu; //将取消选中的数量赋值给页面上\n\n      var sjj = 0; //查看有几个选中的\n\n      var ipn = this.$refs.duzi; //独自的按钮\n      // var qx=this.$refs.qx//全选的按钮\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = ipn[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var q = _step.value;\n\n          //让独自按钮控制全选按钮的状态\n          if (q.checked == true) {\n            sjj++;\n          }\n\n          if (sjj == ipn.length) {\n            this.value = [\"A\"];\n          } else {\n            this.value = [];\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    xia: function xia(e) {\n      //拿到当前的下标\n      this.danxuan = e;\n    },\n    jiajian: function jiajian() {\n      //加减共用函数\n      this.qian = 0;\n      var mo = 0;\n      var moshu = 0;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.shujuku[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var p = _step2.value;\n\n          if (p.cd == true) {\n            //为选中转态 才计算\n            mo += p.price * p.count;\n            moshu += p.count;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      this.qian = mo; //总计\n\n      this.shu = moshu; //结算数量\n    },\n    redact: function redact() {\n      //控制编辑和删除的切换\n      if (this.qiehuan == \"编辑\") {\n        this.qiehuan = \"取消\";\n        this.dibu = false;\n      } else {\n        this.qiehuan = \"编辑\";\n        this.dibu = true;\n      }\n    },\n    shuju: function shuju() {\n      var _this = this;\n\n      //axios请求\n      this.axios.get(\"product/cart\").then(function (result) {\n        if (result.data.code == 1) {\n          // console.log(result)\n          var rows = result.data.data;\n          var n = 0;\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = rows[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var p = _step3.value;\n              p.cd = false; //给数组添加一个状态属性\n\n              n++;\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n\n          ;\n          _this.shun = n; //购物车总数量\n\n          _this.shujuku = rows;\n        } else {\n          _this.$toast(\"亲，去添加自己喜欢的商品吧！\");\n\n          _this.quanshu = -1;\n        }\n      });\n    },\n    quanbu: function quanbu() {\n      //全选按钮\n      var rs = false;\n\n      if (this.value == 0) {\n        rs = true;\n      } else {\n        rs = false;\n      } // console.log(e.disabled)\n      // var rs=e.target.checked//全选 按钮的状态\n\n\n      if (this.quanshu == -1) {\n        this.$toast(\"购物车为空\");\n      } else {\n        // console.log(rs)\n        var sb = 0; //全部钱\n\n        var jie = 0; //全部数量\n\n        var qqxx = 0;\n        this.qian = 0;\n        this.shu = 0;\n        this.delsum = 0;\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = this.shujuku[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var item = _step4.value;\n            //下面的选项状态 随全选状态改变\n            qqxx++;\n            item.cd = rs;\n\n            if (rs == true) {\n              sb += item.price * item.count;\n              jie += item.count;\n            }\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n              _iterator4.return();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n\n        if (rs == true) {\n          this.delsum = qqxx;\n        }\n\n        this.qian = sb; //全部钱\n\n        this.shu = jie; //全部数量\n        // console.log(123)\n        //   console.log(this.shujuku)\n\n        var ipn = this.$refs.duzi; //独自的按钮(让全部按钮的状态控制独自按钮)\n\n        if (rs == true) {\n          var _iteratorNormalCompletion5 = true;\n          var _didIteratorError5 = false;\n          var _iteratorError5 = undefined;\n\n          try {\n            for (var _iterator5 = ipn[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n              var ii = _step5.value;\n              ii.checked = true;\n            }\n          } catch (err) {\n            _didIteratorError5 = true;\n            _iteratorError5 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n                _iterator5.return();\n              }\n            } finally {\n              if (_didIteratorError5) {\n                throw _iteratorError5;\n              }\n            }\n          }\n        } else {\n          var _iteratorNormalCompletion6 = true;\n          var _didIteratorError6 = false;\n          var _iteratorError6 = undefined;\n\n          try {\n            for (var _iterator6 = ipn[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n              var ii = _step6.value;\n              ii.checked = false;\n            }\n          } catch (err) {\n            _didIteratorError6 = true;\n            _iteratorError6 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion6 && _iterator6.return != null) {\n                _iterator6.return();\n              }\n            } finally {\n              if (_didIteratorError6) {\n                throw _iteratorError6;\n              }\n            }\n          }\n        }\n      }\n    },\n    del: function del() {\n      var _this2 = this;\n\n      //删除按钮\n      var id = \"\";\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = this.shujuku[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var d = _step7.value;\n\n          if (d.cd == true) {\n            id += d.id + \",\";\n          }\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7.return != null) {\n            _iterator7.return();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      ;\n      id = id.substring(0, id.length - 1);\n\n      if (id == \"\" || id == undefined) {\n        this.$toast(\"请选择需要删除的商品\");\n      } else {\n        this.$messagebox({\n          title: \"删除商品\",\n          message: \"确定删除选中的商品吗？\",\n          showConfirmButton: true,\n          showCancelButton: true\n        }).then(function (result) {\n          if (result == \"confirm\") {\n            var url = \"http://localhost:3000/product/del_cart\";\n\n            _this2.axios.get(url, {\n              params: {\n                id: id\n              }\n            }).then(function (result) {\n              var ipn = _this2.$refs.duzi;\n              var _iteratorNormalCompletion8 = true;\n              var _didIteratorError8 = false;\n              var _iteratorError8 = undefined;\n\n              try {\n                for (var _iterator8 = ipn[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n                  var che = _step8.value;\n                  che.checked = false;\n                }\n              } catch (err) {\n                _didIteratorError8 = true;\n                _iteratorError8 = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion8 && _iterator8.return != null) {\n                    _iterator8.return();\n                  }\n                } finally {\n                  if (_didIteratorError8) {\n                    throw _iteratorError8;\n                  }\n                }\n              }\n\n              ; //this.shuju();\n              //this.delsum=0;\n\n              history.go(0);\n            });\n          } else {\n            return;\n          }\n\n          ;\n        });\n      }\n\n      ;\n    },\n    goback: function goback() {\n      //返回\n      history.go(-1);\n    },\n    jiesuan: function jiesuan() {\n      //控制二维码\n      if (this.shu == 0) {\n        this.$toast(\"亲，请选择需要支付的商品\");\n      } else {\n        this.show = true;\n        this.show2 = false;\n      }\n    },\n    saoma: function saoma(e) {\n      //控制二维码\n      if (e.target.getAttribute(\"class\") == \"iconfont icon-cuo3 p2\") {\n        this.show = false;\n        this.show2 = true;\n      }\n    },\n    spshou: function spshou() {\n      sessionStorage.setItem(\"onon\", \"no1\");\n      this.$router.push(\"/mvhome\");\n    }\n  },\n  watch: {},\n  created: function created() {\n    var session = sessionStorage.getItem(\"sessionLogin\");\n\n    if (session !== null) {\n      this.shuju();\n    } else {\n      this.$router.push(\"/dl\");\n    }\n\n    ;\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["Mvshopping.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"sp_bg\">\n        <div v-show=\"show2\">\n            <div class=\"pos\"></div>\n        \n            <div class=\"sp_top\"> <!-- 页头 -->\n                <div class=\"icon-lunbo-jiantouzuo iconfont sp_float\" @click=\"goback\"></div>\n                <div class=\"sp_top_sp\">购物车({{this.shun}})</div>\n                <div class=\"shourigth\"><span @click=\"spshou\">首页</span></div>\n            </div>\n            <div>\n                <div class=\"wupin_zong\" v-for=\"(item,index) of shujuku\" :key=\"index\"><!--商品总div-->\n                    <div class=\"gu\">\n                        <div class=\"gu_1\">\n                            <div class=\"gu_1_l\">\n                                <div class=\"iconfont icon-shangdian\"></div>\n                                <p> {{item.date}}-{{item.time}}</p>\n                                <div class=\"icon-lunbo-jiantouyou iconfont \"></div>\n                            </div>\n                            <div>\n                                <p @click=\"redact\">{{qiehuan}}</p>\n                            </div>\n                        </div>  \n                    </div>\n                \n                    <div class=\"wupin\">\n                        <div class=\"wupin_inp\">\n                            <input type=\"checkbox\" @change=\"xuan\" @click=\"xia(index)\"    ref=\"duzi\"><!--选中按钮-->\n                        </div>\n                        <div class=\"wupin_img\">\n                            <img :src=\"require(`../assets/ysg/${item.img}`)\">\n                        </div>\n                        <div class=\"wupin_intro\">\n                            <p class=\"wupin_intro_p1\">{{item.title}}</p>\n                            <p class=\"wupin_intro_p2\">{{item.seat}}</p>\n                            <div class=\"wupin_add\">\n                                <div class=\"wupin_money\">\n                                    <span>￥</span>\n                                    <span>{{item.price}}</span>\n                                </div>\n                                <div class=\"wupin_but\">\n                                    <button @click=\"min(index)\">-</button >\n                                    <input type=\"text\" class=\"add_inp\" v-model=\"item.count\"  readonly>\n                                    <button @click=\"add(index)\">+</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>  \n            </div>\n\n            <div class=\"wupin_bto\"  v-if=\"this.dibu==true\"> <!--底部结算导航-->\n                <div class=\"bto_quan\">\n                    <mt-checklist v-model=\"value\" :options=\"options\" @change=\"quanbu\" ref=\"qx\">\n                    </mt-checklist >\n                    <!-- <input type=\"checkbox\" @change=\"quanbu\" ref=\"qx\"> -->\n                    <!-- <p  >全选</p> -->\n                </div>\n\n                <div class=\"bto_he\">\n                    <div class=\"bto_he_money\">\n                        <p>合计：</p>\n                        <span class=\"bto_he_s1\">￥</span>\n                        <span class=\"bto_he_s2\">{{qian.toFixed(2)}}</span>\n                    </div>\n                    <div class=\"bto_he_jie\" @click=\"jiesuan\">结算({{shu}})</div>\n                </div>\n            </div>\n\n\n            <div class=\"wupin_bto\" v-else-if=\"this.dibu==false\"> <!--底部删除导航-->\n                <div class=\"bto_quan\">\n                    <!-- <input type=\"checkbox\"  ref=\"qx\"   @change=\"quanbu\"> -->\n                     <mt-checklist v-model=\"value\" :options=\"options\" @change=\"quanbu\" ref=\"qx\">\n                    </mt-checklist >\n                    <!-- <p >全选</p> -->\n                </div>\n\n                <div class=\"bto_he\">\n                    <div class=\"bto_he_money  kong\">\n                    </div>\n                    <div class=\"bto_he_jie shanchu\" @click=\"del\">删除({{delsum}})</div>\n                </div>\n            </div>\n            <div class=\"btbt\">\n\n            </div>\n        </div>\n        <erweima @click.native=\"saoma\" v-show=\"show\"></erweima>\n    </div>\n</template>\n\n<script>\nimport erweima from './Mverweima';\nexport default {\n    data() {\n        return {\n            danxuan:0,//保存下标\n            qian:0,//保存总计的总价\n            shu:0,//选中的数量\n            shun:0,//购物车总数量\n            dibu:true,//控制底部导航的切换\n            qiehuan:\"编辑\",\n            delsum:0,//删除的数量\n            tf:false,\n            shujuku:[],\n            show:false,//控制二维码\n            show2:true,//控制页面\n            quanshu:0,//购物车为空时，不能使用全选按钮\n            value:[],\n            options : [{\n\t\t  label: '全选',\n\t\t  value: 'A'\n\t\t\t},\n\t\t\t]\n        }\n    },\n    components:{\n        erweima,\n    },\n    methods:{\n        min(e){//减法函数\n            for(var i=0;i<this.shujuku.length;i++){\n                if(e==i){\n                    if(this.shujuku[i].count>1){\n                        this.shujuku[i].count--;\n                    }else{\n                        return;\n                    };\n                    \n                };\n            };\n           this.jiajian();//调用计算总计函数\n        },\n        add(s){//加法函数\n            \n            for(var i=0;i<this.shujuku.length;i++){\n                if(s==i){\n                    if(this.shujuku[i].count<100){\n                       this.shujuku[i].count++;\n                    }else{\n                        return;\n                    };\n                    \n                };\n            };\n           this.jiajian();//调用计算总计函数\n          \n        },\n        xuan(e){//单个按钮\n        \n            var add=0;//选中价格\n            var min=0;//取消价格\n            var zshu=0;//选中数量\n            var jshu=0;//取消数量\n            var zongshu=0;//删除选中的数量\n            for(var i=0;i<this.shujuku.length;i++){//当前选中的\n                if(e.target.checked==true){\n                    if(this.danxuan==i){\n                        add=this.shujuku[i].count*this.shujuku[i].price;//选中的价格\n                        zshu=this.shujuku[i].count;//选中的数量\n                    };\n                }else{\n                    if(this.danxuan==i){//当前去取消的\n                       min=this.shujuku[i].count*this.shujuku[i].price;//取消的价格\n                       jshu=this.shujuku[i].count;//取消的数量\n                    };\n                };\n                if(this.danxuan==i){//给cd监听状态\n                    this.shujuku[i].cd=e.target.checked\n                };\n\n                if(this.shujuku[i].cd==true){\n                    zongshu++\n                }\n                \n                \n            };\n            this.delsum=zongshu;//删除选中的数量\n            this.qian+=add;//将总计赋值给页面上\n            this.qian-=min;//将总计赋值给页面上\n            this.shu+=zshu//将选中的数量赋值给页面上\n            this.shu-=jshu//将取消选中的数量赋值给页面上\n            var sjj=0//查看有几个选中的\n            var ipn=this.$refs.duzi//独自的按钮\n           // var qx=this.$refs.qx//全选的按钮\n            for(var q of ipn){//让独自按钮控制全选按钮的状态\n                if(q.checked==true){\n                    sjj++\n                }\n                if(sjj==ipn.length){\n                     this.value=[\"A\"]\n                }else{\n                    this.value=[]\n                }\n                \n            }\n            \n        },\n        xia(e){//拿到当前的下标\n            this.danxuan=e;   \n        },\n\n        jiajian(){//加减共用函数\n            this.qian=0;\n             var mo=0;\n             var moshu=0;\n           for(var p of this.shujuku){\n               if(p.cd==true){//为选中转态 才计算\n                   mo+=p.price*p.count\n                   moshu+=p.count\n               }\n           }\n           this.qian=mo//总计\n           this.shu=moshu//结算数量\n        },\n        redact(){//控制编辑和删除的切换\n            if(this.qiehuan==\"编辑\"){\n                this.qiehuan=\"取消\";\n                this.dibu=false;\n            }else{\n                this.qiehuan=\"编辑\";\n                this.dibu=true;\n            }\n             \n        },\n        shuju(){//axios请求\n           this.axios.get(\"product/cart\").then(\n            (result)=>{\n                if(result.data.code==1){\n                    // console.log(result)\n                    var rows=result.data.data;\n                    var n=0;\n                    for(var p of rows){\n                        p.cd=false;//给数组添加一个状态属性\n                        n++\n                    };\n                    this.shun=n;//购物车总数量\n                    this.shujuku=rows\n               }else{\n                   this.$toast(\"亲，去添加自己喜欢的商品吧！\");\n                   this.quanshu=-1\n               }\n            });\n            \n        },\n        quanbu(){//全选按钮\n       \n        var rs=false;\n        if(this.value==0){\n            rs=true\n        }else{\n            rs=false\n        }\n        // console.log(e.disabled)\n       // var rs=e.target.checked//全选 按钮的状态\n            if(this.quanshu==-1){\n                this.$toast(\"购物车为空\");\n                \n            }else{\n\n                \n               // console.log(rs)\n               var sb=0;//全部钱\n               var jie=0//全部数量\n               \n               var qqxx=0;\n               this.qian=0\n               this.shu=0\n               this.delsum=0\n               for(var item of this.shujuku){//下面的选项状态 随全选状态改变\n                   qqxx++\n                   item.cd=rs;\n                   if(rs==true){\n                       sb+=item.price*item.count;\n                       jie+=item.count;\n                      \n                   }\n               }\n               if(rs==true){\n                   this.delsum=qqxx;\n               }\n               \n               this.qian=sb//全部钱\n               this.shu=jie//全部数量\n               // console.log(123)\n               //   console.log(this.shujuku)\n   \n                var ipn=this.$refs.duzi//独自的按钮(让全部按钮的状态控制独自按钮)\n                   if(rs==true){\n                       for(var ii of ipn){\n                           ii.checked=true;\n                       }\n                   }else{\n                       for(var ii of ipn){\n                           ii.checked=false;\n                       }\n                   }\n            }\n        },\n        del(){//删除按钮\n            var id=\"\"\n            for(var d of this.shujuku){\n                if(d.cd==true){\n                    id+=d.id+\",\"\n                }\n            };\n            id=id.substring(0,id.length-1);\n            if(id==\"\"||id==undefined){\n                 this.$toast(\"请选择需要删除的商品\")\n                }else{\n                    this.$messagebox({\n                        title:\"删除商品\",\n                        message:\"确定删除选中的商品吗？\",\n                        showConfirmButton:true,\n                        showCancelButton:true\n                    }).then(result=>{                       \n                        if(result==\"confirm\"){\n                            var url=\"http://localhost:3000/product/del_cart\"; \n                            this.axios.get(url,{params:{id}}).then(result=>{\n                                \n                                var ipn=this.$refs.duzi\n                                for(var che of ipn){\n                                    che.checked=false  \n                                };\n                                //this.shuju();\n                                //this.delsum=0;\n                                history.go(0)\n                            });\n                             \n                        }else{\n                            return;\n                        };\n                    });\n                };\n\n\n\n            \n            \n        },\n        goback(){//返回\n            history.go(-1)\n        },\n        jiesuan(){//控制二维码\n            if(this.shu==0){\n                this.$toast(\"亲，请选择需要支付的商品\")\n            }else{\n                this.show=true;\n                this.show2=false;\n            }\n        },\n        saoma(e){//控制二维码\n           if(e.target.getAttribute(\"class\")==\"iconfont icon-cuo3 p2\"){\n               this.show=false;\n               this.show2=true;\n           }\n        },\n        spshou(){\n            sessionStorage.setItem(\"onon\",\"no1\");\n            this.$router.push(\"/mvhome\")\n        },\n\n    },\n    watch:{\n       \n    },\n    created(){\n        var session=sessionStorage.getItem(\"sessionLogin\");\n        if(session!==null){\n            this.shuju();\n        }else{\n            this.$router.push(\"/dl\")\n        };\n    },\n    mounted(){\n       \n    },\n\n}\n</script>\n\n<style scoped>\n    @import \"../assets/css/shopping.css\";\n</style>\n"],"sourceRoot":"src\\components"}]}